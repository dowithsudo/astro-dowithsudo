---
const { pathname } = Astro.url;
const isEn = pathname.startsWith("/en");

let targetUrl;
if (isEn) {
  targetUrl = pathname.replace(/^\/en/, "") || "/";
} else {
  targetUrl = `/en${pathname === "/" ? "" : pathname}`;
}

targetUrl = targetUrl.length > 1 && targetUrl.endsWith("/") 
  ? targetUrl.slice(0, -1) 
  : targetUrl;
---

<div class="language-switcher ml-5 flex items-center gap-2 border-l border-border pl-5 dark:border-darkmode-border">
  <a
    href={isEn ? targetUrl : "#"}
    class={`text-sm font-bold transition-all duration-300 ${
      !isEn 
        ? "text-primary cursor-default" 
        : "text-text-dark hover:text-primary dark:text-white/70 dark:hover:text-white"
    }`}
  >
    ID
  </a>
  
  <span class="text-border dark:text-darkmode-border">/</span>
  
  <a
    href={!isEn ? targetUrl : "#"}
    class={`text-sm font-bold transition-all duration-300 ${
      isEn 
        ? "text-primary cursor-default" 
        : "text-text-dark hover:text-primary dark:text-white/70 dark:hover:text-white"
    }`}
  >
    EN
  </a>
</div>